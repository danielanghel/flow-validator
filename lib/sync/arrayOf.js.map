{"version":3,"sources":["../../src/sync/arrayOf.js"],"names":["arrayOf","t","aof","ArrayOfType","a","arrayType","validate","v","result","errors","forEach","item","index","parse","e","ValidationError","String","length","expected","got"],"mappings":";;;;;;;;;;QAOgBA,O,GAAAA,O;;AALhB;;AAEA;;AACA;;;;AAEO,SAASA,OAAT,CAAoBC,CAApB,EAAgD;AACrD,MAAMC,MAAM,IAAIC,iBAAJ,CAAgBF,CAAhB,EAAmB,aAAK;AAClC,QAAMG,IAAIC,qBAAUC,QAAV,CAAmBC,CAAnB,CAAV;AACA,QAAMC,SAAmB,EAAzB;AACA,QAAMC,SAAiB,EAAvB;AACAL,MAAEM,OAAF,CAAU,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACzB,UAAI;AACFJ,eAAOI,KAAP,IAAgBX,EAAEY,KAAF,CAAQF,IAAR,CAAhB;AACD,OAFD,CAEE,OAAOG,CAAP,EAAU;AACV,YAAIA,aAAaC,gCAAjB,EACEN,OAAOO,OAAOJ,KAAP,CAAP,IAAyBE,CAAzB,CADF,KAEK,MAAMA,CAAN;AACN;AACF,KARD;AASA,QAAI,mCAA2BL,MAA3B,EAAmCQ,MAAvC,EACE,MAAM,IAAIF,gCAAJ,CAAoB,EAAEG,UAAUhB,GAAZ,EAAiBiB,KAAKZ,CAAtB,EAAyBE,cAAzB,EAApB,CAAN;AACF,WAAOD,MAAP;AACD,GAhBW,CAAZ;AAiBA,SAAON,GAAP;AACD","file":"arrayOf.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"./ValidationError\";\nimport type { Errors } from \"./ValidationError\";\nimport { arrayType } from \"./arrayType\";\nimport { Type, ArrayOfType } from \"./Type\";\n\nexport function arrayOf<T>(t: Type<T>): ArrayOfType<T> {\n  const aof = new ArrayOfType(t, v => {\n    const a = arrayType.validate(v);\n    const result: Array<T> = [];\n    const errors: Errors = {};\n    a.forEach((item, index) => {\n      try {\n        result[index] = t.parse(item);\n      } catch (e) {\n        if (e instanceof ValidationError)\n          errors[String(index)] = (e: ValidationError);\n        else throw e;\n      }\n    });\n    if (Object.getOwnPropertyNames(errors).length)\n      throw new ValidationError({ expected: aof, got: v, errors });\n    return result;\n  });\n  return aof;\n}\n"]}