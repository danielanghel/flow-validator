{"version":3,"sources":["../../src/sync/VobjectExact.js"],"names":["VobjectExact","s","oes","VObjectExactType","o","objectType","validate","v","keys","errors","key","hasOwnProperty","ValidationError","expected","noProperty","got","e","length"],"mappings":";;;;;;;;;;;;;;;;;;QAMgBA,Y,GAAAA,Y;;AAJhB;;AACA;;AACA;;;;AAEO,SAASA,YAAT,CACLC,CADK,EAE2D;AAChE,MAAMC,MAAM,IAAIC,uBAAJ,CAAqBF,CAArB,EAAwB,aAAK;AACvC,QAAMG,IAAIC,iBAAWC,QAAX,CAAoBC,CAApB,CAAV;AACA,QAAMC,OAAO,oBAAYJ,CAAZ,CAAb;AACA,QAAMK,SAAS,EAAf;AAHuC;AAAA;AAAA;;AAAA;AAIvC,sDAAkBD,IAAlB,4GAAwB;AAAA,YAAbE,IAAa;;AACtB,YAAI,CAACT,EAAEU,cAAF,CAAiBD,IAAjB,CAAL,EAA4B;AAC1BD,iBAAOC,IAAP,IAAc,IAAIE,gCAAJ,CAAoB;AAChCC,sBAAUC,gBADsB;AAEhCC,iBAAKX,EAAEM,IAAF;AAF2B,WAApB,CAAd;AAID,SALD,MAME,IAAI;AACFT,YAAES,IAAF,EAAOJ,QAAP,CAAgBF,EAAEM,IAAF,CAAhB;AACD,SAFD,CAEE,OAAOM,CAAP,EAAU;AACV,cAAIA,aAAaJ,gCAAjB,EAAkCH,OAAOC,IAAP,IAAcM,CAAd,CAAlC,KACK,MAAMA,CAAN;AACN;AACJ;AAjBsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBvC,QAAI,mCAA2BP,MAA3B,EAAmCQ,MAAvC,EACE,MAAM,IAAIL,gCAAJ,CAAoB,EAAEC,UAAUX,GAAZ,EAAiBa,KAAKX,CAAtB,EAAyBK,cAAzB,EAApB,CAAN;AACF,WAAQL,CAAR;AACD,GArBW,CAAZ;AAsBA,SAAOF,GAAP;AACD","file":"VobjectExact.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"./ValidationError\";\nimport { VType, VObjectExactType } from \"./VType\";\nimport { objectType, noProperty } from \"./base\";\n\nexport function VobjectExact<S: { [key: string]: VType<any> }>(\n  s: S\n): VObjectExactType<S, $Exact<$ObjMap<S, <F>(v: VType<F>) => F>>> {\n  const oes = new VObjectExactType(s, v => {\n    const o = objectType.validate(v);\n    const keys = Object.keys(o);\n    const errors = {};\n    for (const key of keys) {\n      if (!s.hasOwnProperty(key)) {\n        errors[key] = new ValidationError({\n          expected: noProperty,\n          got: o[key]\n        });\n      } else\n        try {\n          s[key].validate(o[key]);\n        } catch (e) {\n          if (e instanceof ValidationError) errors[key] = e;\n          else throw e;\n        }\n    }\n    if (Object.getOwnPropertyNames(errors).length)\n      throw new ValidationError({ expected: oes, got: o, errors });\n    return (o: any);\n  });\n  return oes;\n}\n"]}