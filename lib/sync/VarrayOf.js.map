{"version":3,"sources":["../../src/sync/VarrayOf.js"],"names":["VarrayOf","t","aof","VArrayOfType","a","arrayType","validate","v","errors","forEach","item","index","e","ValidationError","String","length","expected","got"],"mappings":";;;;;;;;;;QAOgBA,Q,GAAAA,Q;;AALhB;;AAEA;;AACA;;;;AAEO,SAASA,QAAT,CAAqBC,CAArB,EAAmD;AACxD,MAAMC,MAAM,IAAIC,mBAAJ,CAAiBF,CAAjB,EAAoB,aAAK;AACnC,QAAMG,IAAIC,qBAAUC,QAAV,CAAmBC,CAAnB,CAAV;AACA,QAAMC,SAAiB,EAAvB;AACAJ,MAAEK,OAAF,CAAU,UAACC,IAAD,EAAOC,KAAP,EAAiB;AACzB,UAAI;AACFV,UAAEK,QAAF,CAAWI,IAAX;AACD,OAFD,CAEE,OAAOE,CAAP,EAAU;AACV,YAAIA,aAAaC,gCAAjB,EACEL,OAAOM,OAAOH,KAAP,CAAP,IAAyBC,CAAzB,CADF,KAEK,MAAMA,CAAN;AACN;AACF,KARD;AASA,QAAI,mCAA2BJ,MAA3B,EAAmCO,MAAvC,EACE,MAAM,IAAIF,gCAAJ,CAAoB,EAAEG,UAAUd,GAAZ,EAAiBe,KAAKV,CAAtB,EAAyBC,cAAzB,EAApB,CAAN;AACF,WAASJ,CAAT,CAdmC,CAcN;AAC9B,GAfW,CAAZ;AAgBA,SAAOF,GAAP;AACD","file":"VarrayOf.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"./ValidationError\";\nimport type { Errors } from \"./ValidationError\";\nimport { arrayType } from \"./arrayType\";\nimport { VType, VArrayOfType } from \"./VType\";\n\nexport function VarrayOf<T>(t: VType<T>): VArrayOfType<T> {\n  const aof = new VArrayOfType(t, v => {\n    const a = arrayType.validate(v);\n    const errors: Errors = {};\n    a.forEach((item, index) => {\n      try {\n        t.validate(item);\n      } catch (e) {\n        if (e instanceof ValidationError)\n          errors[String(index)] = (e: ValidationError);\n        else throw e;\n      }\n    });\n    if (Object.getOwnPropertyNames(errors).length)\n      throw new ValidationError({ expected: aof, got: v, errors });\n    return ((a: any): Array<T>); // eslint-disable-line flowtype/no-weak-types\n  });\n  return aof;\n}\n"]}