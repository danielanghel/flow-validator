{"version":3,"sources":["../../src/sync/Vobject.js"],"names":["Vobject","s","os","VObjectType","o","objectType","validate","v","keys","errors","key","e","ValidationError","length","expected","got"],"mappings":";;;;;;;;;;;;;;;;;;QAMgBA,O,GAAAA,O;;AAJhB;;AACA;;AACA;;;;AAEO,SAASA,OAAT,CACLC,CADK,EAE8C;AACnD,MAAMC,KAAK,IAAIC,kBAAJ,CAAgBF,CAAhB,EAAmB,aAAK;AACjC,QAAMG,IAAIC,iBAAWC,QAAX,CAAoBC,CAApB,CAAV;AACA,QAAMC,OAAO,oBAAYP,CAAZ,CAAb;AACA,QAAMQ,SAAS,EAAf;AAHiC;AAAA;AAAA;;AAAA;AAIjC,sDAAkBD,IAAlB,4GAAwB;AAAA,YAAbE,IAAa;;AACtB,YAAI;AACFT,YAAES,IAAF,EAAOJ,QAAP,CAAgBF,EAAEM,IAAF,CAAhB;AACD,SAFD,CAEE,OAAOC,CAAP,EAAU;AACV,cAAIA,aAAaC,gCAAjB,EAAkCH,OAAOC,IAAP,IAAcC,CAAd,CAAlC,KACK,MAAMA,CAAN;AACN;AACF;AAXgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYjC,QAAI,mCAA2BF,MAA3B,EAAmCI,MAAvC,EACE,MAAM,IAAID,gCAAJ,CAAoB,EAAEE,UAAUZ,EAAZ,EAAgBa,KAAKX,CAArB,EAAwBK,cAAxB,EAApB,CAAN;AACF,WAAOL,CAAP;AACD,GAfU,CAAX;AAgBA,SAAOF,EAAP;AACD","file":"Vobject.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"./ValidationError\";\nimport { VType, VObjectType } from \"./VType\";\nimport { objectType } from \"./base\";\n\nexport function Vobject<S: { [key: string]: VType<any> }>(\n  s: S\n): VObjectType<S, $ObjMap<S, <F>(v: VType<F>) => F>> {\n  const os = new VObjectType(s, v => {\n    const o = objectType.validate(v);\n    const keys = Object.keys(s);\n    const errors = {};\n    for (const key of keys) {\n      try {\n        s[key].validate(o[key]);\n      } catch (e) {\n        if (e instanceof ValidationError) errors[key] = e;\n        else throw e;\n      }\n    }\n    if (Object.getOwnPropertyNames(errors).length)\n      throw new ValidationError({ expected: os, got: o, errors });\n    return o;\n  });\n  return os;\n}\n"]}