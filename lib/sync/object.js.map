{"version":3,"sources":["../../src/sync/object.js"],"names":["object","s","os","ObjectType","o","objectType","validate","v","keys","result","errors","key","parse","e","ValidationError","length","expected","got"],"mappings":";;;;;;;;;;;;;;;;;;QAMgBA,M,GAAAA,M;;AAJhB;;AACA;;AACA;;;;AAEO,SAASA,MAAT,CACLC,CADK,EAE4C;AACjD,MAAMC,KAAK,IAAIC,gBAAJ,CAAeF,CAAf,EAAkB,aAAK;AAChC,QAAMG,IAAIC,iBAAWC,QAAX,CAAoBC,CAApB,CAAV;AACA,QAAMC,OAAO,oBAAYP,CAAZ,CAAb;AACA,QAAMQ,SAAS,EAAf;AACA,QAAMC,SAAS,EAAf;AAJgC;AAAA;AAAA;;AAAA;AAKhC,sDAAkBF,IAAlB,4GAAwB;AAAA,YAAbG,IAAa;;AACtB,YAAI;AACFF,iBAAOE,IAAP,IAAcV,EAAEU,IAAF,EAAOC,KAAP,CAAaR,EAAEO,IAAF,CAAb,CAAd;AACD,SAFD,CAEE,OAAOE,CAAP,EAAU;AACV,cAAIA,aAAaC,gCAAjB,EAAkCJ,OAAOC,IAAP,IAAcE,CAAd,CAAlC,KACK,MAAMA,CAAN;AACN;AACF;AAZ+B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAahC,QAAI,mCAA2BH,MAA3B,EAAmCK,MAAvC,EACE,MAAM,IAAID,gCAAJ,CAAoB,EAAEE,UAAUd,EAAZ,EAAgBe,KAAKb,CAArB,EAAwBM,cAAxB,EAApB,CAAN;AACF,WAAOD,MAAP;AACD,GAhBU,CAAX;AAiBA,SAAOP,EAAP;AACD","file":"object.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"./ValidationError\";\nimport { Type, ObjectType } from \"./Type\";\nimport { objectType } from \"./base\";\n\nexport function object<S: { [key: string]: Type<any> }>(\n  s: S\n): ObjectType<S, $ObjMap<S, <F>(v: Type<F>) => F>> {\n  const os = new ObjectType(s, v => {\n    const o = objectType.validate(v);\n    const keys = Object.keys(s);\n    const result = {};\n    const errors = {};\n    for (const key of keys) {\n      try {\n        result[key] = s[key].parse(o[key]);\n      } catch (e) {\n        if (e instanceof ValidationError) errors[key] = e;\n        else throw e;\n      }\n    }\n    if (Object.getOwnPropertyNames(errors).length)\n      throw new ValidationError({ expected: os, got: o, errors });\n    return result;\n  });\n  return os;\n}\n"]}