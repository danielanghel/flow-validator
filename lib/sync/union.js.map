{"version":3,"sources":["../../src/sync/union.js"],"names":["union","a","b","u","UnionType","left","right","parse","v","e","ValidationError","expected","got"],"mappings":";;;;;QAKgBA,K,GAAAA,K;;AAHhB;;AACA;;AAEO,SAASA,KAAT,CAAqBC,CAArB,EAAiCC,CAAjC,EAA8D;AACnE,MAAMC,IAAI,IAAIC,eAAJ,CAAcH,CAAd,EAAiBC,CAAjB,EAAoB,aAAK;AACjC,QAAIG,aAAJ;AACA,QAAIC,cAAJ;AACA,QAAI;AACFD,aAAOJ,EAAEM,KAAF,CAAQC,CAAR,CAAP;AACD,KAFD,CAEE,OAAOC,CAAP,EAAU;AACV,UAAIA,aAAaC,gCAAjB,EAAiC,CAAjC,KACK,MAAMD,CAAN;AACN;AACD,QAAI;AACFH,cAAQJ,EAAEK,KAAF,CAAQC,CAAR,CAAR;AACD,KAFD,CAEE,OAAOC,CAAP,EAAU;AACV,UAAIA,aAAaC,gCAAjB,EAAiC,CAAjC,KACK,MAAMD,CAAN;AACN;AACD,QAAIJ,IAAJ,EAAU,OAAOA,IAAP;AACV,QAAIC,KAAJ,EAAW,OAAOA,KAAP;AACX,UAAM,IAAII,gCAAJ,CAAoB,EAAEC,UAAUR,CAAZ,EAAeS,KAAKJ,CAApB,EAApB,CAAN;AACD,GAlBS,CAAV;AAmBA,SAAOL,CAAP;AACD","file":"union.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"./ValidationError\";\nimport { Type, UnionType } from \"./Type\";\n\nexport function union<A, B>(a: Type<A>, b: Type<B>): UnionType<A, B> {\n  const u = new UnionType(a, b, v => {\n    let left;\n    let right;\n    try {\n      left = a.parse(v);\n    } catch (e) {\n      if (e instanceof ValidationError);\n      else throw e;\n    }\n    try {\n      right = b.parse(v);\n    } catch (e) {\n      if (e instanceof ValidationError);\n      else throw e;\n    }\n    if (left) return left;\n    if (right) return right;\n    throw new ValidationError({ expected: u, got: v });\n  });\n  return u;\n}\n"]}