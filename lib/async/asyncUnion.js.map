{"version":3,"sources":["../../src/async/asyncUnion.js"],"names":["asyncUnion","a","b","u","AsyncUnionType","v","left","right","parse","ValidationError","expected","got"],"mappings":";;;;;;;;;;;;;;QAKgBA,U,GAAAA,U;;AAHhB;;AACA;;;;AAEO,SAASA,UAAT,CACLC,CADK,EAELC,CAFK,EAGiB;AAAA;;AACtB,MAAMC,IAAI,IAAIC,yBAAJ,CAAmBH,CAAnB,EAAsBC,CAAtB;AAAA,wFAAyB,iBAAMG,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAC7BC,kBAD6B;AAE7BC,mBAF6B;AAAA;AAAA;AAAA,qBAIlBN,EAAEO,KAAF,CAAQH,CAAR,CAJkB;;AAAA;AAI/BC,kBAJ+B;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,oBAM3B,uBAAaG,gCANc;AAAA;AAAA;AAAA;;AAME;AANF;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,qBAUjBP,EAAEM,KAAF,CAAQH,CAAR,CAViB;;AAAA;AAU/BE,mBAV+B;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA,oBAY3B,uBAAaE,gCAZc;AAAA;AAAA;AAAA;;AAYE;AAZF;AAAA;;AAAA;AAAA;;AAAA;AAAA,mBAe7BH,IAf6B;AAAA;AAAA;AAAA;;AAAA,+CAehBA,IAfgB;;AAAA;AAAA,mBAgB7BC,KAhB6B;AAAA;AAAA;AAAA;;AAAA,+CAgBfA,KAhBe;;AAAA;AAAA,oBAiB3B,IAAIE,gCAAJ,CAAoB,EAAEC,UAAUP,CAAZ,EAAeQ,KAAKN,CAApB,EAApB,CAjB2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAzB;;AAAA;AAAA;AAAA;AAAA,MAAV;AAmBA,SAAOF,CAAP;AACD","file":"asyncUnion.js","sourcesContent":["// @flow\n\nimport { ValidationError } from \"../sync/ValidationError\";\nimport { AsyncType, AsyncUnionType } from \"./AsyncType\";\n\nexport function asyncUnion<A, B>(\n  a: AsyncType<A>,\n  b: AsyncType<B>\n): AsyncUnionType<A, B> {\n  const u = new AsyncUnionType(a, b, async v => {\n    let left;\n    let right;\n    try {\n      left = await a.parse(v);\n    } catch (e) {\n      if (e instanceof ValidationError);\n      else throw e;\n    }\n    try {\n      right = await b.parse(v);\n    } catch (e) {\n      if (e instanceof ValidationError);\n      else throw e;\n    }\n    if (left) return left;\n    if (right) return right;\n    throw new ValidationError({ expected: u, got: v });\n  });\n  return u;\n}\n"]}